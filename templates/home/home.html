{% extends 'common_code/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block title %}Movie Mania{% endblock %}

{% block content %}

<div class="home-wrapper">

   
    <section class="hero-section">
        <h1 class="hero-title">Welcome to Movie Mania</h1>
        <p class="hero-subtitle">
            Your ultimate entertainment house with thousands of movies.
            Discover. Watch. Enjoy.
        </p>

        <div class="hero-cta">
            <span>Sign up now for downloading</span>
            <a href="{% url 'registration' %}" class="btn btn-primary-1">Sign Up</a>
        </div>
    </section>


    
    <section class="popular-section">
        <h2 class="section-heading">Popular Movies</h2>

        <div class="slider-container">

            <button class="slider-btn left" onclick="scrollSlider('left')">
                &#10094;
            </button>

            <div class="slider-track" id="trendingSlider">
                {% for movie in populars %}
                <div class="slider-card movie-card">
                    <a href="{% url 'movie_detail' movie.id %}">
                        <div class="poster-wrapper">
                            <img src="{{ movie.poster_url }}"
                                alt="{{ movie.title }}"
                                class="poster-img"
                                loading="lazy">
                            <div class="overlay">
                                <span>View Details</span>
                            </div>
                        </div>
                    </a>
                    <div class="slider-info">
                        <span class="rank-badge">{{ forloop.counter }}</span>
                        <h6 class="movie-title">{{ movie.title }}</h6>
                    </div>
                </div>
                {% empty %}
                <p>No popular movies available.</p>
                {% endfor %}
            </div>

            <button class="slider-btn right" onclick="scrollSlider('right')">
                &#10095;
            </button>

        </div>
    </section>


    
    <section class="random-section">
        <h2 class="section-heading">For Your Entertainment</h2>

        <div class="movie-grid">
            {% for movie in randoms %}
            <div class="movie-card">
                <a href="{% url 'movie_detail' movie.id %}">
                    <div class="poster-wrapper">
                        <img src="{{ movie.poster_url }}"
                            alt="{{ movie.title }}"
                            class="poster-img"
                            loading="lazy">
                        <div class="overlay">
                            <span>View Details</span>
                        </div>
                    </div>
                </a>
                <h5 class="movie-title">{{ movie.title }}</h5>
            </div>
            {% empty %}
            <p>No movies available.</p>
            {% endfor %}
        </div>
    </section>

</div>


<script>
function scrollSlider(direction) {
    const slider = document.getElementById('trendingSlider');
    const scrollAmount = slider.clientWidth * 0.8;

    if (direction === 'left') {
        slider.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
    } else {
        slider.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    }
}

const slider = document.getElementById('trendingSlider');

setInterval(() => {
    if (slider.scrollLeft + slider.clientWidth >= slider.scrollWidth) {
        slider.scrollTo({ left: 0, behavior: 'smooth' });
    } else {
        slider.scrollBy({ left: 300, behavior: 'smooth' });
    }
}, 2000); 
</script>



{% endblock %}
